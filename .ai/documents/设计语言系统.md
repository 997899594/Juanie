# Juanie 设计语言系统

> 基于设计令牌的现代化主题系统 - 设计与技术的完美融合

## 1. 设计哲学与技术架构

### 1.1 核心理念

* **设计令牌驱动**：单一真理源，从设计到代码的无缝转换

* **类型安全**：TypeScript 确保设计系统的类型安全

* **组件化思维**：基于 Naive UI 的企业级组件生态

* **原子化样式**：UnoCSS 提供灵活的样式扩展能力

### 1.2 技术实现架构

```typescript
// 设计令牌 → Naive UI 主题 → UnoCSS 配置 → Vue 组件
DesignTokens → GlobalThemeOverrides → UnoCSS Theme → Vue Components
```

## 2. 设计令牌系统

### 2.1 令牌结构

```typescript
// packages/ui/src/tokens/types.ts
interface DesignTokens {
  colors: ColorTokens        // 品牌色彩
  semantic: SemanticColorTokens  // 语义化色彩
  neutral: NeutralColorTokens    // 中性色系
  spacing: SpacingTokens     // 间距系统
  radius: RadiusTokens       // 圆角系统
  typography: TypographyTokens   // 字体系统
  shadows: ShadowTokens      // 阴影系统
  animations: AnimationTokens    // 动画系统
}
```

### 2.2 B站品牌色彩系统

```typescript
// packages/ui/src/tokens/bilibili.ts
export const bilibiliColors = {
  // B站品牌色 - 粉色系
  pink: {
    400: '#fb7299', // 主品牌色
    500: '#e85a8a', // 悬停态
    600: '#d4477a', // 按压态
  },
  
  // B站蓝色系
  blue: {
    500: '#00a1d6', // B站蓝
    600: '#0090c1', // 悬停态
    700: '#006d9c', // 按压态
  },
  
  // 功能色
  success: '#00c091',
  warning: '#ff9500', 
  error: '#ff6875',
  info: '#00a1d6',
}
```

### 2.3 CSS 变量映射

```css
/* 自动生成的 CSS 变量 */
:root {
  --n-color-primary: 251, 114, 153;     /* #fb7299 */
  --n-color-primary-hover: 232, 90, 138; /* #e85a8a */
  --n-color-success: 0, 192, 145;       /* #00c091 */
  --n-text-color: 17, 24, 39;           /* #111827 */
  --n-border-color: 229, 231, 235;      /* #e5e7eb */
}
```

## 3. 组件主题系统

### 3.1 Naive UI 主题配置

```typescript
// packages/ui/src/themes/bilibili.ts
export const bilibiliTheme: GlobalThemeOverrides = {
  common: {
    primaryColor: bilibiliColors.pink[400],
    primaryColorHover: bilibiliColors.pink[500],
    primaryColorPressed: bilibiliColors.pink[600],
    
    // 直接使用设计令牌
    successColor: bilibiliSemanticTokens.success,
    borderRadius: bilibiliRadius.md,
    fontSize: bilibiliTypography.fontSize.base,
  },
  
  Button: {
    // 按钮特定的主题覆盖
    borderRadiusMedium: bilibiliRadius.md,
    fontSizeMedium: bilibiliTypography.fontSize.base,
  }
}
```

### 3.2 组件使用示例

```vue
<template>
  <!-- 直接使用 Naive UI 组件，自动应用主题 -->
  <n-button type="primary" size="medium">
    B站风格按钮
  </n-button>
  
  <!-- 结合 UnoCSS 原子类进行微调 -->
  <n-card class="bilibili-gradient-hover rounded-lg">
    <n-space vertical>
      <n-text class="text-lg font-semibold">
        卡片标题
      </n-text>
      <n-text type="secondary">
        卡片内容描述
      </n-text>
    </n-space>
  </n-card>
</template>
```

## 4. 原子化样式系统

### 4.1 UnoCSS 主题集成

```typescript
// packages/ui/uno/bilibili.ts
export const bilibiliUnoTheme = createUnoTheme(bilibiliTokens)

// 生成的主题配置
{
  colors: {
    // 直接映射到 Naive UI CSS 变量
    primary: 'rgb(var(--n-color-primary))',
    'text-primary': 'rgb(var(--n-text-color))',
    'bg-base': 'rgb(var(--n-color-body))',
  },
  spacing: bilibiliSpacing,
  borderRadius: bilibiliRadius,
}
```

### 4.2 快捷类定义

```typescript
// packages/ui/uno/utils.ts
export const bilibiliUnoShortcuts = {
  // B站品牌快捷类
  'bilibili-gradient': 'bg-gradient-to-r from-primary to-secondary',
  'bilibili-text-gradient': 'bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent',
  'bilibili-shadow': 'shadow-lg shadow-primary/20',
  
  // 布局快捷类
  'flex-center': 'flex items-center justify-center',
  'flex-between': 'flex items-center justify-between',
  
  // 按钮快捷类
  'btn-primary': 'btn-base bg-primary text-white hover:bg-primary-hover',
}
```

## 5. 间距与布局系统

### 5.1 间距令牌

```typescript
// 基于 4px 基准的间距系统
export const bilibiliSpacing: SpacingTokens = {
  xs: '4px',   // 0.25rem
  sm: '8px',   // 0.5rem  
  md: '16px',  // 1rem
  lg: '24px',  // 1.5rem
  xl: '32px',  // 2rem
  '2xl': '48px', // 3rem
  '3xl': '64px', // 4rem
}
```

### 5.2 圆角系统

```typescript
export const bilibiliRadius: RadiusTokens = {
  none: '0px',
  sm: '4px',    // 小圆角
  md: '8px',    // 中等圆角（默认）
  lg: '12px',   // 大圆角
  xl: '16px',   // 超大圆角
  full: '9999px', // 完全圆形
}
```

## 6. 字体系统

### 6.1 字体族定义

```typescript
export const bilibiliTypography: TypographyTokens = {
  fontFamily: {
    sans: '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif',
    mono: 'ui-monospace, SFMono-Regular, "SF Mono", Consolas, "Liberation Mono", Menlo, monospace',
  },
  
  fontSize: {
    xs: '12px',   // 辅助文字
    sm: '14px',   // 次要文字
    base: '14px', // B站默认字体大小
    lg: '16px',   // 重要文字
    xl: '18px',   // 标题文字
    '2xl': '20px', // 大标题
    '3xl': '24px', // 页面标题
    '4xl': '32px', // 超大标题
  },
}
```

### 6.2 使用示例

```vue
<template>
  <!-- 使用 Naive UI 的文字组件 -->
  <n-text :depth="1" class="text-3xl font-bold">
    页面标题
  </n-text>
  
  <!-- 结合 UnoCSS 类名 -->
  <div class="text-base font-medium text-secondary">
    正文内容
  </div>
</template>
```

## 7. 阴影与动画系统

### 7.1 阴影令牌

```typescript
export const bilibiliShadows: ShadowTokens = {
  sm: '0 1px 2px 0 rgb(0 0 0 / 0.05)',
  md: '0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)',
  lg: '0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)',
  xl: '0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1)',
}
```

### 7.2 动画令牌

```typescript
export const bilibiliAnimations: AnimationTokens = {
  duration: {
    fast: '150ms',    // 快速交互
    normal: '300ms',  // 标准动画
    slow: '500ms',    // 慢速动画
  },
  easing: {
    linear: 'linear',
    easeIn: 'ease-in',
    easeOut: 'ease-out',
    easeInOut: 'ease-in-out',
  },
}
```

## 8. 技术集成与使用

### 8.1 项目集成

```typescript
// apps/web/src/App.vue
import { bilibiliTheme } from '@juanie/ui/themes'

const themeOverrides = bilibiliTheme
```

```typescript
// apps/web/vite.config.ts
import { defineConfig } from 'vite'
import UnoCSS from 'unocss/vite'
import { bilibiliUnoConfig } from '@juanie/ui/uno'

export default defineConfig({
  plugins: [
    UnoCSS(bilibiliUnoConfig),
  ],
})
```

### 8.2 开发工作流

```bash
# 1. 修改设计令牌
# packages/ui/src/tokens/bilibili.ts

# 2. 自动生成主题配置
# packages/ui/src/themes/bilibili.ts (自动更新)

# 3. 自动生成 UnoCSS 配置  
# packages/ui/uno/bilibili.ts (自动更新)

# 4. 在组件中使用
# 直接使用 Naive UI 组件 + UnoCSS 原子类
```

### 8.3 类型安全保障

```typescript
// 完整的 TypeScript 类型支持
import type { BilibiliTokens } from '@juanie/ui/tokens'
import type { GlobalThemeOverrides } from 'naive-ui'

// 编译时类型检查
const customTheme: GlobalThemeOverrides = {
  common: {
    primaryColor: bilibiliTokens.colors.primary, // ✅ 类型安全
    // primaryColor: '#invalid', // ❌ 类型错误
  }
}
```

## 9. 最佳实践

### 9.1 组件开发规范

```vue
<template>
  <!-- ✅ 优先使用 Naive UI 组件 -->
  <n-button type="primary" size="medium">
    提交
  </n-button>
  
  <!-- ✅ 使用 UnoCSS 进行布局和微调 -->
  <div class="flex-center gap-md p-lg">
    <n-icon :component="IconCheck" />
    <n-text>操作成功</n-text>
  </div>
  
  <!-- ❌ 避免自造基础组件 -->
  <!-- <button class="btn px-4 py-2">提交</button> -->
</template>
```

### 9.2 主题扩展

```typescript
// 扩展设计令牌
export const customTokens = {
  ...bilibiliTokens,
  colors: {
    ...bilibiliTokens.colors,
    accent: '#ff6b35', // 新增强调色
  }
}

// 自动生成新的主题配置
export const customTheme = createTheme(customTokens)
```

### 9.3 响应式设计

```vue
<template>
  <!-- 使用 UnoCSS 响应式类名 -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-md">
    <n-card v-for="item in items" :key="item.id">
      <!-- 卡片内容 -->
    </n-card>
  </div>
</template>
```

## 10. 维护与更新

### 10.1 设计令牌更新流程

1. **设计师**：在设计工具中更新颜色/间距等
2. **开发者**：更新 `packages/ui/src/tokens/bilibili.ts`
3. **自动化**：主题配置和 UnoCSS 配置自动更新
4. **应用**：所有组件自动应用新的设计令牌

### 10.2 版本管理

```json
// packages/ui/package.json
{
  "name": "@juanie/ui",
  "version": "1.0.0",
  "exports": {
    "./tokens": "./src/tokens/index.ts",
    "./themes": "./src/themes/index.ts", 
    "./uno": "./uno/index.ts"
  }
}
```

这个设计语言系统真正实现了**设计与技术的完美融合**，通过设计令牌作为单一真理源，确保了从设计到代码的一致性，同时提供了强大的类型安全和开发体验。
