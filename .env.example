# ============================================
# 平台配置
# ============================================
# 平台 API URL（用于 CI/CD 回调）
# 开发环境: http://localhost:3000
# 生产环境: https://your-platform-domain.com
PLATFORM_API_URL=http://localhost:3000

# ============================================
# 环境配置
# ============================================
NODE_ENV=development
PORT=3000

# ============================================
# 数据库配置 (PostgreSQL)
# ============================================
POSTGRES_USER=findbiao
POSTGRES_PASSWORD=biao1996.
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=juanie_devops

# 可选: 如果需要自定义连接字符串,可以设置 DATABASE_URL
# DATABASE_URL=postgresql://findbiao:biao1996.@localhost:5432/juanie_ai_devops

# ============================================
# GitLab 配置 (可选,如果使用 GitLab 服务)
# ============================================
GITLAB_HOSTNAME=localhost
GITLAB_DB=gitlab_dev
GITLAB_ROOT_PASSWORD=nD3u-Lv8xR2p*sQ7

# ============================================
# 缓存配置 (Redis/Dragonfly)
# ============================================
REDIS_URL=redis://localhost:6379

# ============================================
# 认证配置
# ============================================
# JWT 密钥 (至少32个字符)
JWT_SECRET=this_is_a_test_jwt_secret_key_with_32_plus_characters_for_development
BCRYPT_ROUNDS=12
APP_URL=http://localhost:1997

# 加密密钥 (至少32个字符，用于加密敏感数据如 OAuth Token)
# 生成方式: openssl rand -base64 32
ENCRYPTION_KEY=your_encryption_key_at_least_32_characters_long_for_security

# GitHub OAuth
GITHUB_CLIENT_ID=Ov23li5kloVVHQeOSefR
GITHUB_CLIENT_SECRET=9a25b1ff8bcab87fa9518421614111365db1705b
GITHUB_REDIRECT_URI=http://localhost:1997/login

# GitLab OAuth
GITLAB_CLIENT_ID=337cfdd4b050f525411daa185d92b06b35c89957596b87964b77306b4be0ac4d
GITLAB_CLIENT_SECRET=gloas-2a055bc5500362c69fee41f17d80d8c154c9ce4424be7b871ff6d37ce7df6899
GITLAB_REDIRECT_URI=http://localhost:1997/login
GITLAB_BASE_URL=http://localhost:8080


# ============================================
# AI 服务配置
# ============================================
# Ollama (本地模型 - Docker 容器)
OLLAMA_HOST=http://localhost:11434
OLLAMA_DEFAULT_MODEL=qwen2.5-coder:7b
OLLAMA_TIMEOUT=120000

# 智谱 GLM
ZHIPU_API_KEY=735ba3a60c984a82ac5e4ae790f14a19.kYrZdbmAHdZ6e3S7

# Anthropic Claude (可选)
# ANTHROPIC_API_KEY=your_anthropic_api_key

# OpenAI (可选)
# OPENAI_API_KEY=your_openai_api_key

# 阿里 Qwen (可选)
# QWEN_API_KEY=your_qwen_api_key

# Qdrant (向量数据库)
QDRANT_URL=http://localhost:6333
QDRANT_API_KEY=

# AI 配额和缓存
AI_DEFAULT_MONTHLY_QUOTA=1000000
AI_QUOTA_WARNING_THRESHOLD=0.9
AI_CACHE_TTL=86400
AI_CODE_COMPLETION_TIMEOUT=500
AI_MAX_RETRIES=3
AI_RETRY_BASE_DELAY=1000

# ============================================
# 对象存储配置 (MinIO - Docker 容器)
# ============================================
MINIO_ENDPOINT=localhost
MINIO_PORT=9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_USE_SSL=false

# ============================================
# Kubernetes 配置 (外部服务 - 需要单独安装)
# ============================================
# 支持三种路径格式:
# 1. 绝对路径: /Users/username/.kube/k3s-remote.yaml
# 2. 用户主目录: ~/.kube/k3s-remote.yaml
# 3. 相对路径 (相对于项目根目录): .kube/k3s-remote.yaml
KUBECONFIG=~/.kube/k3s-remote.yaml
K3S_SKIP_TLS_VERIFY=true

# 注意: K3s 的连接信息（HOST、TOKEN、证书）都在 kubeconfig 文件中
# 不需要单独配置 K3S_HOST 和 K3S_TOKEN

# ============================================
# 容器镜像仓库配置
# ============================================
# GitHub Container Registry
# 注意: 镜像路径会自动使用用户的 GitHub 用户名
# 格式: ghcr.io/<username>/<project>
REGISTRY_URL=ghcr.io


# ============================================
# 可观测性配置
# ============================================
# 追踪
TRACING_ENABLED=true
TRACING_SAMPLE_RATE=1.0
JAEGER_ENDPOINT=http://localhost:4318

# 日志
LOGGING_ENABLED=true
LOG_LEVEL=info
LOG_SQL=true  # 开启后输出 SQL 日志，推荐用 `bun drizzle-kit studio` 可视化调试

# ============================================
# 性能配置
# ============================================
# 限流
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=1m

# 缓存
CACHE_ENABLED=true
CACHE_DEFAULT_TTL=300
CACHE_KEY_PREFIX=juanie:

# ============================================
# CORS 配置
# ============================================
CORS_ORIGIN=http://localhost:1997

# ============================================
# 前端环境变量 (VITE_* 前缀)
# ============================================
VITE_API_URL=http://localhost:3000
VITE_WS_URL=ws://localhost:3000
